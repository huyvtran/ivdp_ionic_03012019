<!--
  Generated template for the DirectoryPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Directory</ion-title>
  </ion-navbar>
  <ion-toolbar>
    <ion-searchbar
      [(ngModel)]="searchQuery"
      [debounce]="1000"
      [placeholder]="'Search Employee'"
      [autocorrect]="'on'"
      [animated]="true"
      [autocomplete]="'on'"
      (ionInput)="onInput($event)"
      (ionClear)="onClear($event)">
    </ion-searchbar>
  </ion-toolbar>

</ion-header>


<ion-content>
  <div class="search-spinner" *ngIf="isSearching">
    <div class="search-spinner-background"></div>
    <ion-spinner></ion-spinner>
  </div>
  <ion-list *ngIf="searchedUsers.length > 0">
    <ion-item no-lines text-wrap class="bottom-border" *ngFor="let user of searchedUsers">
      <ion-grid>
        <ion-row class="user-item" (click)="openUserProfile(user.id)">
          <ion-col col-3>
            <ion-avatar item-start>
              <img src="{{user.profile}}" style="width: 5em;height: 5em;border: 2px solid gray;max-width: fit-content;"/>
            </ion-avatar>
          </ion-col>
          <ion-col col-9 text-left>
            <div>{{user.employee_id}}</div>
            <div>{{user.name}}</div>
            <h2>{{user.email}}</h2>
            <h2>{{user.designation}}</h2>
            <h2>{{user.location}}</h2>
            <h2>{{user.mobile? 'Mob: '+user.mobile : ''}}</h2>
            <h2>{{user.extension? 'Ext: '+user.extension : ''}}</h2>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
  </ion-list>

  <ion-list *ngIf="searchedUsers.length === 0" text-center>
    <ion-item *ngIf="searchQuery === ''" text-wrap>
      <h3>
        To search employee details, use above search bar.
      </h3>
    </ion-item>
    <ion-item *ngIf="searchQuery !== '' && !isSearching" text-wrap>
      <h3>
        User not found, Please search with another term.
      </h3>
    </ion-item>
  </ion-list>
</ion-content>
